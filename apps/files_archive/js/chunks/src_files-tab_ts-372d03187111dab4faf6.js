/*! For license information please see src_files-tab_ts-372d03187111dab4faf6.js.LICENSE.txt */
(self.webpackChunkfiles_archive=self.webpackChunkfiles_archive||[]).push([["src_files-tab_ts"],{18535:()=>{},40647:(e,t,n)=>{"use strict";n.d(t,{default:()=>L});var a=n(81827),o=n(85471),i=n(76333),s=n(90087),r=n(99498),c=n(61338),l=n(17203);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=(e,t,n)=>{e=e.replace(/^\/+/g,"");let o=(0,r.Jv)("/apps/"+a.J+"/"+e,t,n);o=o.replace(/\/%7B[^%]+%7D/g,"");const i=v({},t||{});for(const t of e.matchAll(/{([^{}]*)}/g))delete i[t[1]];const s=[];for(const[e,t]of Object.entries(i))try{s.push(e+"="+encodeURIComponent((null==t?void 0:t.toString())||""))}catch(e){console.debug("STRING CONVERSION ERROR",e)}return s.length>0&&(o+="?"+s.join("&")),o};var h=n(18558),d=n(18514);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=(e,t)=>{const n="/"+(t=t||(0,l.HW)().uid)+"/files";if(e.topLevelFolder!==n)throw new Error("".concat(e.path," is located outside of the front end user file space ").concat(n,"."));const a={id:e.fileid,source:(0,r.dC)((0,h.join)("dav/files",t,e.relativePath)),root:"/files/".concat(t),mime:e.mime,mtime:new Date(1e3*e.lastmod),owner:t,size:e.size,permissions:e.permissions,attributes:b(b({},e),{},{"has-preview":e.hasPreview})};return"file"===e.type?new d.ZH(a):new d.vd(a)};var y=n(83386),x=n(85168),N=n(53334),_=n(59316),w=n(82649),A=n(14147),O=n(46095),C=n(71083);const I=e=>(e=>C.A.isAxiosError(e))(e)&&!!e.response;let E=null,k=null;const R=[],S=()=>{var e;let t=(null===(e=(0,o.nI)())||void 0===e?void 0:e.proxy)||null;if(k&&(t&&E===t||!t&&E))return k;for(t?E=t:t=E;t&&t.$parent&&"SidebarRoot"!==t.$options.name;){var n;t=null===(n=t)||void 0===n?void 0:n.$parent}return k=t||null,k},M=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(()=>{const e=S();return(null==e?void 0:e.node)||null})();if(t&&e)t.status=d.zI.LOADING,(0,c.Ic)("files:node:updated",t),R.push(t);else{for(const e of R)e.status=void 0,(0,c.Ic)("files:node:updated",e);R.splice(0,R.length)}};var J=n(98230);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=(0,o.pM)({__name:"FilesTab",setup(e,t){let{expose:n}=t;M(!1);const u=(0,o.KR)(null),v=(0,o.KR)(null),p=(0,o.KR)(null),h=(0,o.KR)(0),f=(0,o.KR)(void 0),b=(0,o.EW)(()=>f.value?f.value.path+"/"+f.value.name:null),P=(0,o.EW)(()=>{var e;return null===(e=f.value)||void 0===e?void 0:e.id}),C=(0,o.KR)(void 0),E=(0,o.KR)(void 0),k=(0,o.KR)([]),R=(0,o.KR)({}),S=(0,o.EW)(()=>Object.keys(R.value).length>0),j=(0,s.A)(),D=(0,o.KR)(!(null==j||!j.mountStripCommonPathPrefixDefault)),B=(0,o.KR)(!(null==j||!j.extractStripCommonPathPrefixDefault)),F=(0,o.KR)(!(null==j||!j.mountBackgroundJob)),z=(0,o.KR)(!(null==j||!j.extractBackgroundJob)),L=(0,o.KR)(void 0),K=(0,o.KR)(!0),U=(0,o.KR)(!1),W=(0,o.KR)(!1),H=(0,o.KR)(!1),q=(0,o.KR)(!1),Z=(0,o.EW)(()=>(0,y.md5)((0,r.Jv)("")+a.J+"-open-archive-mount")),$=(0,o.Kh)({dirName:"",baseName:""}),Q=(0,o.Kh)({dirName:"",baseName:""}),V=(0,o.EW)({get:()=>$.baseName,set:e=>((0,o.hZ)($,"baseName",e),e)}),G=(0,o.EW)({get:()=>$.dirName,set:e=>((0,o.hZ)($,"dirName",e),e)}),X=(0,o.EW)({get:()=>Q.baseName,set:e=>((0,o.hZ)(Q,"baseName",e),e)}),Y=(0,o.EW)({get:()=>Q.dirName,set:e=>((0,o.hZ)(Q,"dirName",e),e)}),ee=(0,o.EW)(()=>G.value+(V.value?"/"+V.value:"")),te=(0,o.EW)(()=>Y.value+(X.value?"/"+X.value:"")),ne=(0,o.EW)(()=>0===E.value?(0,N.Tl)(a.J,"ok"):2&E.value?(0,N.Tl)(a.J,"zip bomb"):1&E.value?(0,N.Tl)(a.J,"too large"):(0,N.Tl)(a.J,"unknown")),ae=(0,o.EW)(()=>k.value.length>0),oe=(0,o.EW)(()=>{var e;return isNaN(parseInt(""+(null===(e=C.value)||void 0===e?void 0:e.originalSize)))?(0,N.Tl)(a.J,"unknown"):(0,d.v7)(C.value.originalSize)}),ie=(0,o.EW)(()=>{var e;return isNaN(parseInt(""+(null===(e=C.value)||void 0===e?void 0:e.compressedSize)))?(0,N.Tl)(a.J,"unknown"):(0,d.v7)(C.value.compressedSize)}),se=(0,o.EW)(()=>{var e;return isNaN(parseInt(""+(null===(e=C.value)||void 0===e?void 0:e.size)))?(0,N.Tl)(a.J,"unknown"):(0,d.v7)(C.value.size)}),re=(0,o.EW)(()=>{var e,t,n;return!C.value||void 0===(null===(e=C.value)||void 0===e?void 0:e.numberOfFiles)||isNaN(parseInt(""+(null===(t=C.value)||void 0===t?void 0:t.numberOfFiles)))?(0,N.Tl)(a.J,"unknown"):""+(null===(n=C.value)||void 0===n?void 0:n.numberOfFiles)}),ce=(0,o.EW)(()=>C.value&&void 0!==C.value.commonPathPrefix?"/"+C.value.commonPathPrefix:(0,N.Tl)(a.J,"unknown")),le=async()=>{D.value=!(null==j||!j.mountStripCommonPathPrefixDefault),B.value=!(null==j||!j.extractStripCommonPathPrefixDefault),F.value=!(null==j||!j.mountBackgroundJob),z.value=!(null==j||!j.extractBackgroundJob),b.value&&(ve(b.value),pe(b.value,!0),de(b.value,!0))},ue=async e=>{f.value=e,V.value=f.value.name.split(".")[0],G.value=f.value.path,X.value=V.value,Y.value=G.value,le()};n({update:ue});const ve=async e=>{var t,n;++h.value,e=encodeURIComponent(e);const a=m("archive/info/{fileName}",{fileName:e}),o={};L.value&&(o.passPhrase=L.value);try{const e=(await O.Ay.post(a,o)).data;if(C.value=e.archiveInfo,E.value=e.archiveStatus,e.messages)for(const t of e.messages)(0,x.cf)(t)}catch(e){if(J.A.error("ERROR",e),I(e)&&e.response.data){const t=e.response.data;if(C.value=t.archiveInfo,E.value=t.archiveStatus,t.messages)for(const e of t.messages)(0,x.Qg)(e,{timeout:x.DH})}else C.value=void 0}null!==(t=C.value)&&void 0!==t&&t.defaultMountPoint&&(V.value=C.value.defaultMountPoint),null!==(n=C.value)&&void 0!==n&&n.defaultTargetBaseName&&(X.value=C.value.defaultTargetBaseName),--h.value},pe=async(e,t)=>{const n=[...k.value],a=await fe(e,!1);if(k.value=a.mounts,t)return;const o=k.value.filter(e=>-1===n.findIndex(t=>e.mountPoint.fileid===t.mountPoint.fileid)),i=n.filter(e=>-1===k.value.findIndex(t=>t.mountPoint.fileid===e.mountPoint.fileid));for(const e of i){const t=g(e.mountPoint);t.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:deleted",t)}for(const e of o){const t=g(e.mountPoint);t.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:created",t)}},me=(e,t,n)=>(0,y.md5)(e+t+n),he=e=>me(e.target,e.sourcePath,e.destinationPath),de=async(e,t)=>{!0!==t&&++h.value,e=encodeURIComponent(e);const n=m("archive/schedule/{operation}/{fileName}",{operation:"status",fileName:e});try{const e=(await O.Ay.get(n)).data,t={};for(const n of e)t[he(n)]=n;for(const e of Object.keys(R.value))t[e]||(0,o.yH)(R.value,e);for(const[e,n]of Object.entries(t))(0,o.hZ)(R.value,e,n)}catch(e){if(J.A.error("ERROR",e),I(e)&&e.response.data){const t=e.response.data;if(t.messages)for(const e of t.messages)(0,x.Qg)(e,{timeout:x.DH})}}!0!==t&&--h.value},fe=async(e,t)=>{const n={mounts:[],mounted:!1};!0!==t&&++h.value,e=encodeURIComponent(e);const a=m("archive/mount/{fileName}",{fileName:e});try{const e=(await O.Ay.get(a)).data;if(n.mounts=e.mounts,n.mounted=e.mounted,e.messages)for(const t of e.messages)(0,x.cf)(t)}catch(e){if(J.A.error("ERROR",e),I(e)&&e.response.data){const t=e.response.data;if(n.mounts=t.mounts,n.mounted=t.mounted,t.messages)for(const e of t.messages)(0,x.Qg)(e,{timeout:x.DH})}}for(const e of n.mounts)!L.value&&e.archivePassPhrase&&(L.value=e.archivePassPhrase),delete e.archivePassPhrase;return!0!==t&&--h.value,n},be=e=>{var t,n;if((null==e||null===(t=e.notification)||void 0===t?void 0:t.app)!==a.J)return;const o=null==e||null===(n=e.notification)||void 0===n||null===(n=n.messageRichParameters)||void 0===n?void 0:n.destination;if("mount"!==(null==o?void 0:o.status))return;const i=null==o?void 0:o.mount;if(!i)return void J.A.error("No mount info in mount notification event");let s;try{s=JSON.parse(i)}catch(t){return void J.A.error("files_archive, unable to decode mount entity",{event:e,mountData:i})}if(s.archiveFileId!==P.value)return void J.A.info("*** Archive notification for other file received",e);const r=me("mount",s.archiveFilePath,s.mountPointPath);R.value[r]&&delete R.value[r],J.A.info("*** Mount notification received, updating mount-list",o);const c=o.id,l=k.value.findIndex(e=>e.mountPoint.fileid===c);if(-1===l)try{k.value.push(T(T({},s),{},{mountPoint:JSON.parse(o.folder)}))}catch(e){J.A.error("Unable to decode mount point folder file-info record.",{destinationData:o})}},Pe=e=>{const t=e.fileid,n=k.value.findIndex(e=>e.mountPoint.fileid===t);n>=0?(J.A.info("BERFORE RENAME",T({},k[n])),(0,o.hZ)(k[n],"mountPoint",e),(0,o.hZ)(k[n],"mountPointPath",e.path),(0,o.hZ)(k[n],"mountPointPathHash",(0,y.md5)(e.path)),J.A.info("AFTER RENAME",T({},k[n]))):J.A.info("RENAME OF NODE NOT FOR US",e)},ge=e=>{const t=e.fileid,n=k.value.findIndex(e=>e.mountPoint.fileid===t);n>=0?(k.value.splice(n,1),J.A.info("RECORD UNMOUNT",e)):J.A.info("DELETE OF NODE NOT FOR US",{mountPoint:e,archiveMounts:k.value})};return(0,o.KC)(()=>{(0,c.B1)("files:node:deleted",ge),(0,c.B1)("files:node:renamed",Pe),(0,c.B1)("notifications:notification:received",be)}),(0,o.hi)(()=>{(0,c.al)("files:node:deleted",ge),(0,c.al)("files:node:renamed",Pe),(0,c.al)("notifications:notification:received",be)}),{__sfc:!0,archivePassPhraseComponent:u,mountOptionsComponent:v,extractionOptionsComponent:p,loading:h,fileInfo:f,fileName:b,archiveFileId:P,ArchiveStatusOk:0,ArchiveStatusTooLarge:1,ArchiveStatusBomb:2,archiveInfo:C,archiveStatus:E,archiveMounts:k,pendingJobs:R,jobsArePending:S,initialState:j,archiveMountStripCommonPathPrefix:D,archiveExtractStripCommonPathPrefix:B,archiveMountBackgroundJob:F,archiveExtractBackgroundJob:z,archivePassPhrase:L,showArchiveInfo:K,showArchivePassPhrase:U,showArchiveMounts:W,showArchiveExtraction:H,showPendingJobs:q,openMountTarget:Z,archiveMountFileInfo:$,archiveExtractFileInfo:Q,archiveMountBaseName:V,archiveMountDirName:G,archiveExtractBaseName:X,archiveExtractDirName:Y,archiveMountPathName:ee,archiveExtractPathName:te,archiveStatusText:ne,archiveMounted:ae,humanArchiveOriginalSize:oe,humanArchiveCompressedSize:ie,humanArchiveFileSize:se,numberOfArchiveMembers:re,commonPathPrefix:ce,isLt:(e,t)=>e<t,openMountOptionsMenu:()=>{var e;null===(e=v.value)||void 0===e||e.openMenu()},openExtractionOptionsMenu:()=>{var e;null===(e=p.value)||void 0===e||e.openMenu()},getData:le,update:ue,getArchiveInfo:ve,refreshArchiveMounts:pe,getJobIdFromOperation:me,getJobIdFromJob:he,getPendingJobs:de,cancelPendingOperation:async e=>{const t=encodeURIComponent(b.value),n=encodeURIComponent(ee.value),i=m("archive/schedule/{operation}/{archivePath}/{mountPath}",{operation:e,archivePath:t,mountPath:n});let s={};try{s=(await O.Ay.delete(i,{})).data}catch(e){if(J.A.error("ERROR",e),I(e)){const t=[];e.response.data&&(s=e.response.data,Array.isArray(s.messages)&&t.splice(t.length,0,...s.messages)),t.length||t.push((0,N.Tl)(a.J,'Cancelling the background job failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,x.Qg)(e,{timeout:x.DH})}}if(s.removed)for(const e of s.removed){const t=he(e);R.value[t]&&(0,o.yH)(R.value,t)}},getArchiveMounts:fe,mountArchive:async()=>{const e=encodeURIComponent(b.value),t=encodeURIComponent(ee.value),n=F.value?"archive/schedule/mount/{archivePath}/{mountPath}":"archive/mount/{archivePath}/{mountPath}",o=m(n,{archivePath:e,mountPath:t});M(!0);const i={};L.value&&(i.passPhrase=L.value),i.stripCommonPathPrefix=!!D.value;try{const e=await O.Ay.post(o,i);if(!F.value){const t=e.data,n=t.mountPoint.fileid;if(-1===k.value.findIndex(e=>e.mountPoint.fileid===n)){k.value.push(t);const n=g(e.data.mountPoint);n.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:created",n)}}}catch(e){if(J.A.error("ERROR",e),I(e)){const t=[];if(e.response.data){const n=e.response.data;n.messages&&t.splice(t.length,0,...n.messages)}t.length||t.push((0,N.Tl)(a.J,'Mount request failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,x.Qg)(e,{timeout:x.DH})}}F.value&&de(b.value,!0),M(!1)},unmount:async e=>{const t=(0,l.HW)(),n=(0,r.dC)("dav/files/"+t.uid+e.mountPointPath);M(!0);try{await O.Ay.delete(n);const t=k.value.indexOf(e);t>=0?k.value.splice(t,1):J.A.error("UNABLE TO FIND DELETED MOUNT IN LIST",e,k);const a=g(e.mountPoint);a.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:deleted",a)}catch(e){J.A.error("ERROR",e);const t=[];if(I(e)){var o;const n=null===(o=e.response.request)||void 0===o?void 0:o.responseXML;if(n&&"error"===n.documentElement.localName&&"DAV:"===n.documentElement.namespaceURI){const e=n.getElementsByTagNameNS("http://sabredav.org/ns","message");for(const n of e)n.textContent&&t.push(n.textContent)}if(e.response.data){const n=e.response.data;n.messages&&t.splice(t.length,0,...n.messages)}t.length||t.push((0,N.Tl)(a.J,'Unmount request failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,x.Qg)(e,{timeout:x.DH});404===e.response.status&&pe(b.value,!0)}}M(!1)},extractArchive:async()=>{const e=encodeURIComponent(b.value),t=encodeURIComponent(te.value),n=z.value?"archive/schedule/extract/{archivePath}/{targetPath}":"archive/extract/{archivePath}/{targetPath}",o=m(n,{archivePath:e,targetPath:t});M(!0);const i={};L.value&&(i.passPhrase=L.value),i.stripCommonPathPrefix=!!B.value;try{const e=await O.Ay.post(o,i);if(!z.value){const t=g(e.data.targetFolder);t.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:created",t)}}catch(e){if(J.A.error("ERROR",e),I(e)){const t=[];if(e.response.data){const n=e.response.data;n.messages&&t.splice(t.length,0,...n.messages)}t.length||t.push((0,N.Tl)(a.J,'Archive extraction failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,x.Qg)(e,{timeout:x.DH})}}z.value&&de(b.value,!0),M(!1)},setPassPhrase:async()=>{var e,t;const n=U.value?(null===(e=u.value.$el.querySelector('input[type="text"]'))||void 0===e?void 0:e.value)||"":(null===(t=u.value.$el.querySelector('input[type="password"]'))||void 0===t?void 0:t.value)||"";L.value=n;const o=encodeURIComponent(b.value),i=(0,r.Jv)("/apps/"+a.J+"/archive/mount/{archivePath}",{archivePath:o});M(!0);const s={changeSet:{archivePassPhrase:L.value}};try{await O.Ay.patch(i,s)}catch(e){if(J.A.error("ERROR",e),I(e)){const t=[];if(e.response.data){const n=e.response.data;n.messages&&t.splice(t.length,0,...n.messages)}t.length||t.push((0,N.Tl)(a.J,'Patching the passphrase failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,x.Qg)(e,{timeout:x.DH})}}M(!1)},togglePassPhraseVisibility:async()=>{let e=U.value?u.value.$el.querySelector('input[type="text"]'):u.value.$el.querySelector('input[type="password"]');const t=e.value;U.value=!U.value,await(0,o.dY)(),e=U.value?u.value.$el.querySelector('input[type="text"]'):u.value.$el.querySelector('input[type="password"]'),e.value=t},filesAppMountPointUrl:e=>(0,r.Jv)("/apps/files")+"?dir="+encodeURIComponent(e.mountPointPath),onNotification:be,onMountPointRenamed:Pe,onMountPointDeleted:ge,appName:a.J,t:N.Tl,NetworkOffIcon:_.A,CancelIcon:w.A,NcActionInput:i.Az,NcActionCheckbox:i.RI,NcActions:i.B6,NcActionButton:i.Ko,NcListItem:i.l,FilePrefixPicker:A.A}}});const F=(0,n(14486).A)(B,function(){var e,t,n,a,o=this,i=o._self._c,s=o._self._setupProxy;return i("div",{staticClass:"files-tab"},[i("ul",[i("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){s.showArchiveInfo=!s.showArchiveInfo}}},[i("div",{staticClass:"files-tab-entry__avatar icon-info-white"}),o._v(" "),i("div",{staticClass:"files-tab-entry__desc"},[i("h5",[o._v(o._s(s.t(s.appName,"Archive Information")))])]),o._v(" "),i(s.NcActions,[i(s.NcActionButton,{attrs:{icon:"icon-triangle-"+(s.showArchiveInfo?"n":"s")},model:{value:s.showArchiveInfo,callback:function(e){s.showArchiveInfo=e},expression:"showArchiveInfo"}})],1)],1),o._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:s.showArchiveInfo,expression:"showArchiveInfo"}],staticClass:"files-tab-entry"},[s.loading?i("div",{staticClass:"icon-loading-small"}):o._e(),o._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],staticClass:"archive-info"},[s.isLt(0,s.archiveStatus)?i(s.NcListItem,{class:{"archive-error":s.isLt(0,s.archiveStatus)},attrs:{name:s.t(s.appName,"archive status"),bold:!0,details:s.archiveStatusText},scopedSlots:o._u([{key:"icon",fn:function(){return[i("div",{staticClass:"icon-error"})]},proxy:!0}],null,!1,2833062560)}):o._e(),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"archive format"),bold:!0,details:(null===(e=s.archiveInfo)||void 0===e?void 0:e.format)||s.t(s.appName,"unknown"),compact:""}}),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"MIME type"),bold:!0,details:(null===(t=s.archiveInfo)||void 0===t?void 0:t.mimeType)||s.t(s.appName,"unknown"),compact:""}}),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"backend driver"),bold:!0,details:(null===(n=s.archiveInfo)||void 0===n?void 0:n.backendDriver)||s.t(s.appName,"unknown"),compact:""}}),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"uncompressed size"),bold:!0,details:s.humanArchiveOriginalSize,compact:""}}),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"compressed size"),bold:!0,details:s.humanArchiveCompressedSize,compact:""}}),o._v(" "),s.humanArchiveCompressedSize!==s.humanArchiveFileSize?i(s.NcListItem,{attrs:{name:s.t(s.appName,"archive file size"),bold:!0,details:s.humanArchiveFileSize,compact:""}}):o._e(),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"# archive members"),bold:!0,details:s.numberOfArchiveMembers,compact:""}}),o._v(" "),i(s.NcListItem,{attrs:{name:s.t(s.appName,"common prefix"),bold:!0,details:s.commonPathPrefix,compact:""}}),o._v(" "),null!==(a=s.archiveInfo)&&void 0!==a&&a.comment?i(s.NcListItem,{staticClass:"archive-comment",attrs:{name:s.t(s.appName,"creator's comment"),bold:!0,compact:""},scopedSlots:o._u([{key:"subtitle",fn:function(){var e;return[o._v("\n            "+o._s(null===(e=s.archiveInfo)||void 0===e?void 0:e.comment)+"\n          ")]},proxy:!0}],null,!1,3976111642)}):o._e()],1)]),o._v(" "),i("li",{staticClass:"files-tab-entry flex flex-center"},[i("div",{staticClass:"files-tab-entry__avatar icon-password-white"}),o._v(" "),i("div",{staticClass:"files-tab-entry__desc"},[i("h5",[i("span",{staticClass:"main-title"},[o._v(o._s(s.t(s.appName,"Passphrase")))]),o._v(" "),s.archivePassPhrase?o._e():i("span",{staticClass:"title-annotation"},[o._v("("+o._s(s.t(s.appName,"unset"))+")")])])]),o._v(" "),i(s.NcActions,{attrs:{"force-menu":!0}},[s.showArchivePassPhrase?i(s.NcActionInput,{ref:"archivePassPhraseComponent",attrs:{value:s.archivePassPhrase,type:"text",icon:"icon-password"},on:{submit:s.setPassPhrase}},[o._v("\n          "+o._s(s.t(s.appName,"archive passphrase"))+"\n        ")]):i(s.NcActionInput,{ref:"archivePassPhraseComponent",attrs:{value:s.archivePassPhrase,type:"password",icon:"icon-password"},on:{submit:s.setPassPhrase}},[o._v("\n          "+o._s(s.t(s.appName,"archive passphrase"))+"\n        ")]),o._v(" "),i(s.NcActionCheckbox,{on:{change:s.togglePassPhraseVisibility}},[o._v("\n          "+o._s(s.t(s.appName,"Show Passphrase"))+"\n        ")])],1)],1),o._v(" "),i("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){s.showArchiveMounts=!s.showArchiveMounts}}},[i("div",{staticClass:"files-tab-entry__avatar icon-external-white"}),o._v(" "),i("div",{staticClass:"files-tab-entry__desc"},[i("h5",[i("span",{staticClass:"main-title"},[o._v(o._s(s.t(s.appName,"Mount Points")))]),o._v(" "),s.archiveMounted?i("span",{staticClass:"title-annotation"},[o._v("("+o._s(""+s.archiveMounts.length)+")")]):i("span",{staticClass:"title-annotation"},[o._v("("+o._s(s.t(s.appName,"not mounted"))+")")])])]),o._v(" "),i(s.NcActions,[i(s.NcActionButton,{attrs:{icon:"icon-triangle-"+(s.showArchiveMounts?"n":"s")},model:{value:s.showArchiveMounts,callback:function(e){s.showArchiveMounts=e},expression:"showArchiveMounts"}})],1)],1),o._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:s.showArchiveMounts,expression:"showArchiveMounts"}],staticClass:"directory-chooser files-tab-entry"},[s.loading?i("div",{staticClass:"icon-loading-small"}):s.archiveMounted?i("ul",{staticClass:"archive-mounts"},o._l(s.archiveMounts,function(e){return i(s.NcListItem,{key:e.id,attrs:{"force-display-actions":!0,bold:!1},scopedSlots:o._u([{key:"title",fn:function(){return[i("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.mountPointPath,expression:"mountPoint.mountPointPath"}],staticClass:"external icon-folder icon",attrs:{target:s.openMountTarget,href:s.filesAppMountPointUrl(e)}},[o._v("\n              "+o._s(e.mountPointPath)+"\n            ")])]},proxy:!0},{key:"actions",fn:function(){return[i(s.NcActionButton,{on:{click:function(t){return s.unmount(e)}},scopedSlots:o._u([{key:"icon",fn:function(){return[i(s.NetworkOffIcon,{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.t(s.appName,"Disconnect storage"),expression:"t(appName, 'Disconnect storage')"}],attrs:{size:20}})]},proxy:!0}],null,!0)})]},proxy:!0},1&e.mountFlags?{key:"extra",fn:function(){return[i("div",[o._v(o._s(s.t(s.appName,"Common prefix {prefix} is stripped.",{prefix:s.commonPathPrefix})))])]},proxy:!0}:null],null,!0)})}),1):i("div",[i(s.FilePrefixPicker,{attrs:{hint:s.t(s.appName,"Not mounted, create a new mount point:"),placeholder:s.t(s.appName,"base name")},on:{submit:s.mountArchive},model:{value:s.archiveMountFileInfo,callback:function(e){s.archiveMountFileInfo=e},expression:"archiveMountFileInfo"}}),o._v(" "),i("div",{staticClass:"flex flex-center"},[i("div",{staticClass:"label",on:{click:s.openMountOptionsMenu}},[o._v("\n            "+o._s(s.t(s.appName,"Mount Options"))+"\n          ")]),o._v(" "),i(s.NcActions,{ref:"mountOptionsComponent",attrs:{"force-menu":!0}},[i(s.NcActionCheckbox,{ref:"mountStripCommonPathPrefixComponent",attrs:{checked:s.archiveMountStripCommonPathPrefix},on:{change:function(e){s.archiveMountStripCommonPathPrefix=!s.archiveMountStripCommonPathPrefix}}},[o._v("\n              "+o._s(s.t(s.appName,"strip common path prefix"))+"\n            ")]),o._v(" "),i(s.NcActionCheckbox,{ref:"mountBackgroundJobComponent",attrs:{checked:s.archiveMountBackgroundJob},on:{change:function(e){s.archiveMountBackgroundJob=!s.archiveMountBackgroundJob}}},[o._v("\n              "+o._s(s.t(s.appName,"schedule as background job"))+"\n            ")])],1)],1)],1)]),o._v(" "),i("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){s.showArchiveExtraction=!s.showArchiveExtraction}}},[i("div",{staticClass:"files-tab-entry__avatar icon-play-white"}),o._v(" "),i("div",{staticClass:"files-tab-entry__desc"},[i("h5",[o._v(o._s(s.t(s.appName,"Extract Archive")))])]),o._v(" "),i(s.NcActions,[i(s.NcActionButton,{attrs:{icon:"icon-triangle-"+(s.showArchiveExtraction?"n":"s")},model:{value:s.showArchiveExtraction,callback:function(e){s.showArchiveExtraction=e},expression:"showArchiveExtraction"}})],1)],1),o._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:s.showArchiveExtraction,expression:"showArchiveExtraction"}],staticClass:"directory-chooser files-tab-entry"},[s.loading?i("div",{staticClass:"icon-loading-small"}):i("div",[i(s.FilePrefixPicker,{attrs:{hint:s.t(s.appName,"Choose a directory to extract the archive to:"),placeholder:s.t(s.appName,"basename")},on:{submit:s.extractArchive},model:{value:s.archiveExtractFileInfo,callback:function(e){s.archiveExtractFileInfo=e},expression:"archiveExtractFileInfo"}}),o._v(" "),i("div",{staticClass:"flex flex-center"},[i("div",{staticClass:"label",on:{click:s.openExtractionOptionsMenu}},[o._v("\n            "+o._s(s.t(s.appName,"Extraction Options"))+"\n          ")]),o._v(" "),i(s.NcActions,{ref:"extractionOptionsComponent",attrs:{"force-menu":!0}},[i(s.NcActionCheckbox,{attrs:{checked:s.archiveExtractStripCommonPathPrefix},on:{change:function(e){s.archiveExtractStripCommonPathPrefix=!s.archiveExtractStripCommonPathPrefix}}},[o._v("\n              "+o._s(s.t(s.appName,"strip common path prefix"))+"\n            ")]),o._v(" "),i(s.NcActionCheckbox,{ref:"extractBackgroundJobComponent",attrs:{checked:s.archiveExtractBackgroundJob},on:{change:function(e){s.archiveExtractBackgroundJob=!s.archiveExtractBackgroundJob}}},[o._v("\n              "+o._s(s.t(s.appName,"schedule as background job"))+"\n            ")])],1)],1)],1)]),o._v(" "),i("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){s.showPendingJobs=!s.showPendingJobs}}},[i("div",{staticClass:"files-tab-entry__avatar icon-recent-white"}),o._v(" "),i("div",{staticClass:"files-tab-entry__desc"},[s.jobsArePending?i("h5",[i("span",{staticClass:"main-title"},[o._v(o._s(s.t(s.appName,"Pending Background Jobs")))]),o._v(" "),s.jobsArePending?i("span",{staticClass:"title-annotation"},[o._v("("+o._s(""+Object.keys(s.pendingJobs).length)+")")]):o._e()]):i("h5",[i("span",{staticClass:"main-title"},[o._v(o._s(s.t(s.appName,"No Pending Background Jobs")))])])]),o._v(" "),i(s.NcActions,[i(s.NcActionButton,{attrs:{icon:"icon-triangle-"+(s.showPendingJobs?"n":"s")},model:{value:s.showPendingJobs,callback:function(e){s.showPendingJobs=e},expression:"showPendingJobs"}})],1)],1),o._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:s.jobsArePending&&s.showPendingJobs,expression:"jobsArePending && showPendingJobs"}],staticClass:"directory-chooser files-tab-entry"},[s.loading?i("div",{staticClass:"icon-loading-small"}):s.jobsArePending?i("ul",{staticClass:"pending-jobs"},o._l(s.pendingJobs,function(e){return i(s.NcListItem,{key:e.destinationPath,attrs:{"force-display-actions":!0,bold:!1},scopedSlots:o._u([{key:"title",fn:function(){return[i("div",[o._v(o._s(e.destinationPath))])]},proxy:!0},{key:"actions",fn:function(){return[i(s.NcActionButton,{on:{click:function(t){return s.cancelPendingOperation(e.target)}},scopedSlots:o._u([{key:"icon",fn:function(){return[i(s.CancelIcon,{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.t(s.appName,"Cancel Job"),expression:"t(appName, 'Cancel Job')"}],attrs:{size:20}})]},proxy:!0}],null,!0)})]},proxy:!0},e.stripCommonPathPrefix?{key:"extra",fn:function(){return[i("div",[o._v(o._s(s.t(s.appName,"Job type: {type}",{type:"mount"===e.target?s.t(s.appName,"mount"):s.t(s.appName,"extract")})))]),o._v(" "),i("div",[o._v(o._s(s.t(s.appName,"Common prefix {prefix} will be stripped.",{prefix:s.commonPathPrefix})))])]},proxy:!0}:null],null,!0)})}),1):i("div",[o._v("\n        "+o._s(s.t(s.appName,"No pending background job."))+"\n      ")])])])])},[],!1,null,"36b940a4",null).exports;o.Ay.mixin({data:()=>({appName:a.J}),methods:{t:N.Tl,n:N.zw}}),o.Ay.directive("tooltip",i.m_);const z=o.Ay.extend(F),L=e=>new z({parent:e})},76274:()=>{}}]);
//# sourceMappingURL=src_files-tab_ts-372d03187111dab4faf6.js.map